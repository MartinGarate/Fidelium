@page "/"
@inject NavigationManager NavigationManager
@inject FirebaseAuthService FirebaseAuthService

<PageTitle>Inicio - Fidelium</PageTitle>

<div class="hero-section">
    <h1 class="hero-title">Bienvenido a Fidelium</h1>
    <p class="hero-subtitle">
        La plataforma que te ayuda a gestionar y hacer crecer tu negocio de manera inteligente.
        Simplifica tus operaciones y aumenta la satisfacción de tus clientes.
    </p>
    <div class="hero-actions">
        <button class="btn btn-primary" @onclick="ComenzarAhora">
            Comenzar ahora
        </button>
        <button class="btn btn-link" @onclick="@(() => NavigationManager.NavigateTo("/about"))">
            Conoce más
        </button>
    </div>
</div>

@code {
    /// Al hacer clic en "Comenzar ahora", verifica si el usuario está autenticado.
    /// Si está autenticado, navega a /clientes. Si no, navega a /login obligatoriamente.

    private async Task ComenzarAhora()
    {
        var isAuthenticated = await FirebaseAuthService.IsUserAuthenticated();
        Console.WriteLine($"Usuario autenticado: {isAuthenticated}");

        if (!isAuthenticated)
        {
            Console.WriteLine("Redirigiendo a /login");
            // Redirige al usuario a la página de inicio de sesión obligatoriamente
            NavigationManager.NavigateTo("/login", forceLoad: true);
            return;
        }

        Console.WriteLine("Redirigiendo a /clientes");
        // Si está autenticado, navega a la página de clientes
        NavigationManager.NavigateTo("/clientes");
    }
}