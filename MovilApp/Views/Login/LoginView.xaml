<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MovilApp.Views.Login.LoginView"
             xmlns:viewModels="clr-namespace:MovilApp.ViewModels.Login"
             NavigationPage.HasNavigationBar="False"
             BackgroundColor="#0d0617">

    <ContentPage.BindingContext>
        <viewModels:LoginViewModel />
    </ContentPage.BindingContext>

    <ScrollView>
        <VerticalStackLayout Spacing="25" Padding="30" VerticalOptions="Center">

            <VerticalStackLayout Spacing="10" Margin="0,30,0,20">
                <Frame HeightRequest="90" WidthRequest="90"
                       CornerRadius="20" Padding="0"
                       BackgroundColor="#1a0824"
                       BorderColor="#7a3cff"
                       HorizontalOptions="Center">
                    <Label Text="ðŸ¢" FontSize="50" HorizontalOptions="Center" VerticalOptions="Center"/>
                </Frame>

                <Label Text="Fidelium"
                       FontSize="36"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalTextAlignment="Center"/>

                <Label Text="Software de GestiÃ³n"
                       FontSize="14"
                       TextColor="#bf4dff"
                       HorizontalTextAlignment="Center"
                       CharacterSpacing="2"/>
            </VerticalStackLayout>

            <Border IsVisible="{Binding HasError}"
                    Stroke="#ff3c3c"
                    BackgroundColor="#2a1034"
                    Padding="15"
                    StrokeShape="RoundRectangle 10">
                <Label Text="{Binding ErrorMessage}"
                       TextColor="#ff3c3c"
                       FontSize="13"
                       HorizontalTextAlignment="Center"/>
            </Border>

            <Border IsVisible="{Binding IsBlocked}"
                    Stroke="#f59e0b"
                    BackgroundColor="#2a1a08"
                    Padding="15"
                    StrokeShape="RoundRectangle 10">
                <VerticalStackLayout Spacing="5">
                    <Label Text="âš ï¸ ACCESO RESTRINGIDO"
                           TextColor="#f59e0b"
                           FontSize="14"
                           FontAttributes="Bold"
                           HorizontalTextAlignment="Center"/>
                    <Label Text="{Binding RemainingTime, StringFormat='Reintento en: {0} segundos'}"
                           TextColor="White"
                           FontSize="13"
                           HorizontalTextAlignment="Center"/>
                </VerticalStackLayout>
            </Border>

            <VerticalStackLayout Spacing="18">

                <VerticalStackLayout Spacing="6">
                    <Label Text="EMAIL EMPRESARIAL" FontSize="11" FontAttributes="Bold" TextColor="#bf4dff" Margin="5,0"/>
                    <Border Stroke="#7a3cff" StrokeThickness="1" BackgroundColor="#1a0824" Padding="15,0" StrokeShape="RoundRectangle 10">
                        <Entry Text="{Binding Email}" Keyboard="Email" Placeholder="nombre@fidelium.com" 
                               TextColor="White" PlaceholderColor="#495057" HeightRequest="50" />
                    </Border>
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="6">
                    <Label Text="CONTRASEÃ‘A" FontSize="11" FontAttributes="Bold" TextColor="#bf4dff" Margin="5,0"/>
                    <Border Stroke="#7a3cff" StrokeThickness="1" BackgroundColor="#1a0824" Padding="15,0" StrokeShape="RoundRectangle 10">
                        <Entry Text="{Binding Password}" IsPassword="True" Placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" 
                               TextColor="White" PlaceholderColor="#495057" HeightRequest="50" />
                    </Border>
                </VerticalStackLayout>

                <HorizontalStackLayout Spacing="10" Margin="5,0">
                    <CheckBox IsChecked="{Binding RecordarContraseÃ±a}" Color="#7a3cff" />
                    <Label Text="Mantener sesiÃ³n iniciada" TextColor="LightGray" VerticalOptions="Center" FontSize="14"/>
                </HorizontalStackLayout>

            </VerticalStackLayout>

            <VerticalStackLayout Spacing="15" Margin="0,10,0,0">

                <Button Text="INICIAR SESIÃ“N"
                        Command="{Binding IniciarSesionCommand}"
                        BackgroundColor="#7a3cff"
                        TextColor="White"
                        HeightRequest="55"
                        FontSize="16"
                        FontAttributes="Bold"
                        CornerRadius="10"/>

                <Grid ColumnDefinitions="*,Auto,*" ColumnSpacing="15" VerticalOptions="Center">
                    <BoxView Grid.Column="0" HeightRequest="1" BackgroundColor="#2a1034" VerticalOptions="Center"/>
                    <Label Grid.Column="1" Text="O" TextColor="#495057" FontSize="12" VerticalOptions="Center"/>
                    <BoxView Grid.Column="2" HeightRequest="1" BackgroundColor="#2a1034" VerticalOptions="Center"/>
                </Grid>

                <Button Text="CREAR CUENTA NUEVA"
                        Command="{Binding RegistrarseCommand}"
                        BackgroundColor="Transparent"
                        TextColor="White"
                        BorderColor="#7a3cff"
                        BorderWidth="1"
                        HeightRequest="50"
                        FontSize="14"
                        CornerRadius="10"/>

            </VerticalStackLayout>

            <ActivityIndicator IsRunning="{Binding EstaDescargando}"
                               Color="#bf4dff"
                               HorizontalOptions="Center"
                               Margin="0,10"/>

            <Label Text="Â¿Olvidaste tu acceso? Contacta a soporte"
                   FontSize="12"
                   TextColor="#495057"
                   HorizontalTextAlignment="Center"
                   Margin="0,20,0,20"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>